"use strict";(self["webpackChunkitcast_toutiao"]=self["webpackChunkitcast_toutiao"]||[]).push([[967],{7967:function(t,s,i){i.r(s),i.d(s,{default:function(){return l}});var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",[i("div",{staticClass:"search-header"},[i("van-icon",{staticClass:"goback",attrs:{name:"arrow-left",color:"white",size:"0.48rem"},on:{click:function(s){return t.$router.back()}}}),i("van-search",{directives:[{name:"splot",rawName:"v-splot"}],attrs:{placeholder:"请输入搜索关键词",background:"#007BFF",shape:"round"},on:{input:t.inputFn,search:t.enterFn},model:{value:t.kw,callback:function(s){t.kw=s},expression:"kw"}})],1),t._l(t.suggestList,(function(s,e){return i("div",{key:e,staticClass:"sugg-list"},[0!==t.kw.length?i("div",{staticClass:"sugg-item",domProps:{innerHTML:t._s(t.lightFn(s,t.kw))},on:{click:function(i){return t.clickFn(s)}}}):t._e()])})),0==t.kw.length?i("div",{staticClass:"search-history"},[i("van-cell",{attrs:{title:"搜索历史"},scopedSlots:t._u([{key:"right-icon",fn:function(){return[i("van-icon",{staticClass:"search-icon",attrs:{name:"delete"},on:{click:t.clearFn}})]},proxy:!0}],null,!1,1432151839)}),i("div",{staticClass:"history-list"},t._l(t.history,(function(s,e){return i("span",{key:e,staticClass:"history-item",on:{click:function(i){return t.clickHisFn(s)}}},[t._v(t._s(s)+" ")])})),0)],1):t._e()],2)},r=[];const n=(t,s)=>{const i=new RegExp(s,"ig");return t.replace(i,(t=>`<span style="color: red">${t}</span>`))};var a={data(){return{kw:"",timer:null,suggestList:[],history:JSON.parse(localStorage.getItem("HISTORY"))||["API","java","css","前端","后台接口","python"]}},methods:{inputFn(){""==this.kw&&(this.suggestList=[]),clearTimeout(this.timer),this.timer=setTimeout((async()=>{if(0===this.kw.length)return;const t=await this.$API.suggestListAPI({q:this.kw});this.suggestList=t.data.data.options}),100)},lightFn:n,enterFn(){""!=this.kw&&(this.history.push(this.kw),this.history=Array.from(new Set(this.history))),setTimeout((()=>{this.$router.push({path:`/search/${this.kw}`})}))},clickFn(t){this.history.push(t),this.history=Array.from(new Set(this.history)),setTimeout((()=>{this.$router.push({path:`/search/${t}`})}))},clickHisFn(t){this.$router.push({path:`/search/${t}`})},clearFn(){this.history=[]}},watch:{history(){localStorage.setItem("HISTORY",JSON.stringify(this.history))}}},o=a,c=i(1001),h=(0,c.Z)(o,e,r,!1,null,"7f14b9a9",null),l=h.exports}}]);
//# sourceMappingURL=967.6baa2a3d.js.map