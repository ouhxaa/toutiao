{"version":3,"file":"static/js/441-legacy.8872e29f.js","mappings":"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","sources":["webpack://itcast-toutiao/./src/views/Layout/home/index.vue?86a2","webpack://itcast-toutiao/./src/views/Layout/home/components/ArticleList.vue?75a6","webpack://itcast-toutiao/src/views/Layout/home/components/ArticleList.vue","webpack://itcast-toutiao/./src/views/Layout/home/components/ArticleList.vue?4022","webpack://itcast-toutiao/./src/views/Layout/home/components/ArticleList.vue","webpack://itcast-toutiao/./src/views/Layout/home/components/ChannelEdit.vue?aed2","webpack://itcast-toutiao/src/views/Layout/home/components/ChannelEdit.vue","webpack://itcast-toutiao/./src/views/Layout/home/components/ChannelEdit.vue?360f","webpack://itcast-toutiao/./src/views/Layout/home/components/ChannelEdit.vue","webpack://itcast-toutiao/src/views/Layout/home/index.vue","webpack://itcast-toutiao/./src/views/Layout/home/index.vue?283a","webpack://itcast-toutiao/./src/views/Layout/home/index.vue","webpack://itcast-toutiao/./node_modules/core-js/modules/es.array.find-index.js","webpack://itcast-toutiao/./node_modules/core-js/modules/es.object.get-own-property-descriptors.js","webpack://itcast-toutiao/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://itcast-toutiao/./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',[_c('van-nav-bar',{attrs:{\"fixed\":\"\",\"title\":\"头条仿制\"},scopedSlots:_vm._u([{key:\"left\",fn:function(){return [_c('van-icon',{attrs:{\"name\":\"fire-o\",\"color\":\"#ee0a24\",\"size\":\"0.48rem\"}})]},proxy:true},{key:\"right\",fn:function(){return [_c('van-icon',{attrs:{\"name\":\"search\",\"size\":\"0.48rem\",\"color\":\"#fff\"},on:{\"click\":function($event){return _vm.$router.push('/search')}}})]},proxy:true}])})],1),_c('div',{staticClass:\"main\"},[_c('van-tabs',{attrs:{\"animated\":\"\",\"sticky\":\"\",\"offset-top\":\"1.226667rem\"},model:{value:(_vm.channelId),callback:function ($$v) {_vm.channelId=$$v},expression:\"channelId\"}},_vm._l((_vm.channelList),function(item){return _c('van-tab',{key:item.id,attrs:{\"title\":item.name,\"name\":item.id}},[_c('ArticleList',{attrs:{\"cid\":_vm.channelId}})],1)}),1),_c('van-icon',{staticClass:\"moreChannels\",attrs:{\"name\":\"plus\",\"size\":\"0.37333334rem\"},on:{\"click\":function($event){_vm.show = true}}})],1),_c('van-popup',{staticClass:\"edit_wrap\",model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}},[_c('ChannelEdit',{attrs:{\"userChannelList\":_vm.channelList},on:{\"close\":function($event){_vm.show = false},\"addChannel\":_vm.addChannelFn,\"removeChannel\":_vm.removeChannelFn,\"changeChannel\":_vm.channgeChannelFn}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('van-pull-refresh',{on:{\"refresh\":_vm.onRefresh},model:{value:(_vm.isLoading),callback:function ($$v) {_vm.isLoading=$$v},expression:\"isLoading\"}},[_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":\"没有更多了\",\"offset\":\"50\"},on:{\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.articleList),function(item){return _c('article-item',{key:item.art_id,attrs:{\"value\":item},on:{\"disLike\":_vm.disLikeFn,\"reports\":_vm.reportsFn},nativeOn:{\"click\":function($event){return _vm.$router.push((\"/article_detail?aid=\" + (item.art_id)))}}})}),1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <van-pull-refresh v-model=\"isLoading\" @refresh=\"onRefresh\">\n      <!-- 文章列表 -->\n      <van-list\n        v-model=\"loading\"\n        :finished=\"finished\"\n        finished-text=\"没有更多了\"\n        @load=\"onLoad\"\n        offset=\"50\"\n      >\n        <!-- :value ===>父子组件通信 -->\n        <!-- 自定义事件 -->\n        <article-item\n          v-for=\"item in articleList\"\n          :key=\"item.art_id\"\n          :value=\"item\"\n          @disLike=\"disLikeFn\"\n          @reports=\"reportsFn\"\n          @click.native=\"$router.push(`/article_detail?aid=${item.art_id}`)\"\n        ></article-item>\n      </van-list>\n    </van-pull-refresh>\n  </div>\n</template>\n \n<script>\n// 数据预处理 ===>在使用数据之前, 对数据里的值进行修改\nimport { timeAgo } from \"@/utils/date/date\";\nimport { Notify } from \"vant\";\nexport default {\n  props: {\n    cid: Number,\n  },\n  mounted() {},\n  created() {\n    this.getArticlesListData();\n  },\n  data() {\n    return {\n      articleList: [], // 文章列表\n      loading: false, // 底部加载状态\n      finished: false, // 数据是否全部加载完成\n      nextTime: null, //分页\n      isLoading: false, // 顶部刷新状态\n    };\n  },\n  methods: {\n    async getArticlesListData() {\n      try {\n        const res = await this.$API.articlesListAPI({\n          channelId: this.cid, // 默认推荐频道(id为0)\n          timestamp: this.nextTime,\n        });\n        // 回来的数据进行预处理, 把时间转成多久多久之前,注意每一个都要进行转换\n        res.data.data.results.forEach((obj) => {\n          obj.pubdate = timeAgo(obj.pubdate);\n        });\n        if (res.data.data.results.length === 0) {\n          // 告诉list组件其底部显示没有更多数据\n          this.finished = true;\n        } else {\n          // 保存下一页数据的时间(做分页用)\n          this.nextTime = res.data.data.pre_timestamp;\n          // 储存已经请求的和新请求的\n          this.articleList = [...this.articleList, ...res.data.data.results];\n          // 等待网络请求结果后\n          // 底部加载更多状态\n          this.loading = false;\n        }\n      } catch (error) {\n        return Promise.reject(new Error(error));\n      }\n    },\n    onLoad() {\n      // 网页打开list组件自动检查会触发一次onLoad, 所以我们要在有数据后再让onLoad里请求数据\n      if (this.articleList.length > 0) {\n        this.getArticlesListData();\n      }\n    },\n    async onRefresh() {\n      this.nextTime = null;\n      this.articleList = [];\n      try {\n        await this.getArticlesListData();\n        this.isLoading = false;\n      } catch (error) {\n        return Promise.reject(error);\n      }\n    },\n    async disLikeFn(value) {\n      try {\n        await this.$API.articleDislikeAPI({ target: value.art_id });\n        Notify({ type: \"success\", message: \"反馈成功\" });\n      } catch (error) {\n        Notify({ type: \"warning\", message: \"反馈失败-联系程序员\" });\n      }\n    },\n    async reportsFn(value, type) {\n      try {\n        await this.$API.articleReportsAPI({\n          target: value.art_id,\n          type: type,\n          remark: \"就是其他问题\",\n        });\n        Notify({ type: \"success\", message: \"举报成功\" });\n      } catch (error) {\n        Notify({ type: \"warning\", message: \"举报失败\" });\n      }\n    },\n  },\n};\n</script>\n \n<style scoped lang = \"less\">\n</style>","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ArticleList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ArticleList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ArticleList.vue?vue&type=template&id=6d432726&scoped=true&\"\nimport script from \"./ArticleList.vue?vue&type=script&lang=js&\"\nexport * from \"./ArticleList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6d432726\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('van-nav-bar',{attrs:{\"title\":\"我的频道\"},scopedSlots:_vm._u([{key:\"right\",fn:function(){return [_c('van-icon',{attrs:{\"name\":\"cross\",\"size\":\"0.37333334rem\",\"color\":\"white\"},on:{\"click\":_vm.closeFn}})]},proxy:true}])}),_c('div',{staticClass:\"my-channel-box\"},[_c('div',{staticClass:\"channel-title\"},[_c('span',[_vm._v(\"我的频道 \"),_c('span',{staticClass:\"small-title\"},[_vm._v(\" \"+_vm._s(_vm.isEdit ? \"点击删除频道\" : \"点击进入频道\")+\" \")])]),_c('span',{on:{\"click\":function($event){_vm.isEdit = !_vm.isEdit}}},[_vm._v(_vm._s(_vm.isEdit ? \"完成\" : \"编辑\"))])]),_c('van-row',{attrs:{\"type\":\"flex\"}},_vm._l((_vm.userChannelList),function(item){return _c('van-col',{key:item.id,attrs:{\"span\":\"6\"},on:{\"click\":function($event){return _vm.removeFn(item)}}},[_c('div',{staticClass:\"channel-item van-hairline--surround\"},[_vm._v(\" \"+_vm._s(item.name)+\" \"),(_vm.isEdit && item.name != '推荐')?_c('van-badge',{staticClass:\"cross-badge\",attrs:{\"color\":\"transparent\"},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('van-icon',{staticClass:\"badge-icon\",attrs:{\"name\":\"cross\",\"color\":\"#cfcfcf\",\"size\":\"0.32rem\"}})]},proxy:true}],null,true)}):_vm._e()],1)])}),1)],1),_c('div',{staticClass:\"more-channel-box\"},[_vm._m(0),_c('van-row',{attrs:{\"type\":\"flex\"}},_vm._l((_vm.unChannelList),function(item){return _c('van-col',{key:item.id,attrs:{\"span\":\"6\"},on:{\"click\":function($event){return _vm.addFn(item)}}},[_c('div',{staticClass:\"channel-item van-hairline--surround\"},[_vm._v(_vm._s(item.name))])])}),1)],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"channel-title\"},[_c('span',[_vm._v(\"点击添加更多频道：\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <!-- 导航栏 -->\n    <van-nav-bar title=\"我的频道\">\n      <template #right>\n        <van-icon\n          name=\"cross\"\n          size=\"0.37333334rem\"\n          color=\"white\"\n          @click=\"closeFn\"\n        />\n      </template>\n    </van-nav-bar>\n\n    <!-- 我的频道 -->\n    <div class=\"my-channel-box\">\n      <div class=\"channel-title\">\n        <span\n          >我的频道\n          <span class=\"small-title\">\n            {{ isEdit ? \"点击删除频道\" : \"点击进入频道\" }}\n          </span>\n        </span>\n        <span @click=\"isEdit = !isEdit\">{{ isEdit ? \"完成\" : \"编辑\" }}</span>\n      </div>\n\n      <!-- 我的频道列表 -->\n      <van-row type=\"flex\">\n        <van-col\n          span=\"6\"\n          v-for=\"item in userChannelList\"\n          :key=\"item.id\"\n          @click=\"removeFn(item)\"\n        >\n          <div class=\"channel-item van-hairline--surround\">\n            {{ item.name }}\n            <!-- 删除的徽标 -->\n            <van-badge\n              color=\"transparent\"\n              class=\"cross-badge\"\n              v-if=\"isEdit && item.name != '推荐'\"\n            >\n              <template #content>\n                <van-icon\n                  name=\"cross\"\n                  class=\"badge-icon\"\n                  color=\"#cfcfcf\"\n                  size=\"0.32rem\"\n                />\n              </template>\n            </van-badge>\n          </div>\n        </van-col>\n      </van-row>\n    </div>\n\n    <!-- 更多频道 -->\n    <div class=\"more-channel-box\">\n      <div class=\"channel-title\">\n        <span>点击添加更多频道：</span>\n      </div>\n      <!-- 更多频道列表 -->\n      <van-row type=\"flex\">\n        <van-col\n          span=\"6\"\n          v-for=\"item in unChannelList\"\n          :key=\"item.id\"\n          @click=\"addFn(item)\"\n        >\n          <div class=\"channel-item van-hairline--surround\">{{ item.name }}</div>\n        </van-col>\n      </van-row>\n    </div>\n  </div>\n</template>\n \n<script>\nexport default {\n  props: {\n    // 用户已选择频道\n    userChannelList: {\n      type: Array,\n      default: () => [],\n    },\n  },\n  data() {\n    return {\n      allChannelList: [], // 所有频道\n      isEdit: false, // 控制编辑状态\n    };\n  },\n  async created() {\n    try {\n      const result = await this.$API.getAllChannelsAPI();\n      this.allChannelList = result.data.data.channels;\n    } catch (error) {\n      return Promise.reject(error);\n    }\n  },\n  computed: {\n    // 提取未选中的频道数据\n    unChannelList() {\n      return this.allChannelList.filter((item) => {\n        const index = this.userChannelList.findIndex(\n          (element) => element.id === item.id\n        );\n        // 返回-1，就是两者非交集部分\n        // 返回true，那么filter就返回这个元素\n        if (index === -1) return true;\n      });\n    },\n  },\n  methods: {\n    // 新增频道\n    addFn(item) {\n      if (this.isEdit === true) {\n        this.$emit(\"addChannel\", item);\n      }\n    },\n    // 删除频道\n    removeFn(item) {\n      if (this.isEdit === true && item.name !== \"推荐\") {\n        this.$emit(\"removeChannel\", item);\n      } else {\n        this.$emit(\"changeChannel\", item);\n        this.$emit(\"close\");\n      }\n    },\n    // 更新编辑状态\n    closeFn() {\n      this.$emit(\"close\");\n      this.isEdit = false;\n    },\n  },\n};\n</script>\n \n<style scoped lang = \"less\">\n.van-popup,\n.popup-container {\n  background-color: transparent;\n  height: 100%;\n  width: 100%;\n}\n\n.popup-container {\n  display: flex;\n  flex-direction: column;\n}\n\n.pop-header {\n  height: 90px;\n  background-color: #007bff;\n  color: white;\n  text-align: center;\n  font-size: 14px;\n  position: relative;\n  .title {\n    width: 100%;\n    position: absolute;\n    bottom: 15px;\n  }\n}\n\n.pop-body {\n  flex: 1;\n  overflow: scroll;\n  padding: 8px;\n  background-color: white;\n}\n\n.my-channel-box,\n.more-channel-box {\n  .channel-title {\n    display: flex;\n    justify-content: space-between;\n    font-size: 14px;\n    line-height: 28px;\n    padding: 0 6px;\n  }\n}\n\n.channel-item {\n  font-size: 12px;\n  text-align: center;\n  line-height: 36px;\n  background-color: #fafafa;\n  margin: 5px;\n}\n\n/*删除的微标 */\n.cross-badge {\n  position: absolute;\n  right: -3px;\n  top: 0;\n  border: none;\n}\n\n/*提示文字 */\n.small-title {\n  font-size: 10px;\n  color: gray;\n}\n</style>","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChannelEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChannelEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChannelEdit.vue?vue&type=template&id=04c2b44e&scoped=true&\"\nimport script from \"./ChannelEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./ChannelEdit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChannelEdit.vue?vue&type=style&index=0&id=04c2b44e&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"04c2b44e\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div>\n    <!-- 头部标签导航 -->\n    <div>\n      <van-nav-bar fixed title=\"头条仿制\">\n        <template #left>\n          <!-- 这里不放图片了，找图麻烦，有需要自己找，代码注释解开即可，注意样式 -->\n          <!-- <img :src=\"imgObj\" alt=\"\" class=\"logo\"> -->\n          <van-icon name=\"fire-o\" color=\"#ee0a24\" size=\"0.48rem\" />\n        </template>\n        <template #right>\n          <van-icon name=\"search\" size=\"0.48rem\" color=\"#fff\" @click=\"$router.push('/search')\"/>\n        </template>\n      </van-nav-bar>\n    </div>\n    <!-- 频道部分 -->\n    <div class=\"main\">\n      <van-tabs v-model=\"channelId\" animated sticky offset-top=\"1.226667rem\">\n        <!-- 在van-tabs上修改v-model变量名(把active换成channelId)\n             在van-tab绑定name属性和值(值为频道ID)\n             点van-tab后,name值会自动绑定给v-model(vant组件内部实现的)\n              -->\n        <van-tab\n          :title=\"item.name\"\n          v-for=\"item in channelList\"\n          :key=\"item.id\"\n          :name=\"item.id\"\n        >\n          <ArticleList :cid=\"channelId\" />\n        </van-tab>\n      </van-tabs>\n      <!-- 编辑频道图标 -->\n      <van-icon\n        name=\"plus\"\n        size=\"0.37333334rem\"\n        class=\"moreChannels\"\n        @click=\"show = true\"\n      />\n    </div>\n\n    <!-- 弹出层组件 -->\n    <van-popup v-model=\"show\" class=\"edit_wrap\">\n      <ChannelEdit\n        @close=\"show = false\"\n        :userChannelList=\"channelList\"\n        @addChannel=\"addChannelFn\"\n        @removeChannel=\"removeChannelFn\"\n        @changeChannel=\"channgeChannelFn\"\n      />\n    </van-popup>\n  </div>\n</template>\n \n<script>\n// import logo from '../../../assets/tab_logo.png'\nimport ArticleList from \"./components/ArticleList.vue\";\nimport ChannelEdit from \"./components/ChannelEdit.vue\";\nexport default {\n  components: {\n    ArticleList,\n    ChannelEdit,\n  },\n  data() {\n    return {\n      // imgObj:logo\n      // 频道ID(默认0是推荐)\n      channelId: 0,\n      channelList: [],\n      show: false,\n    };\n  },\n  mounted() {\n    this.getUserChannelData();\n  },\n  methods: {\n    async getUserChannelData() {\n      try {\n        const res = await this.$API.userChannelAPI();\n        this.channelList = res.data.data.channels;\n      } catch (error) {\n        this.$router.push('/login')\n      }\n    },\n    // 更新频道\n    async updateChannel() {\n      // 先过滤掉id为0的推荐频道, 把剩余的数组返回\n      const newArr = this.channelList.filter((item) => item.id != 0);\n      // map会收集每次遍历return的值形成一个新数组\n      const lastArr = newArr.map((item, index) => {\n        // 浅拷贝(让对象和原数组脱离关系)  es6\n        const newObj = { ...item };\n        newObj.seq = index + 1;\n        // 删除对象里name键值对\n        delete newObj.name;\n        return newObj;\n      });\n      await this.$API.updateChannelAPI({\n        channels: lastArr,\n      });\n    },\n    // 添加频道\n    async addChannelFn(item) {\n      this.channelList.push(item);\n      this.updateChannel();\n    },\n    // 删除频道\n    async removeChannelFn(item) {\n      const int = this.channelList.findIndex((el) => el.id === item.id);\n      this.channelList.splice(int, 1);\n      this.updateChannel();\n    },\n    // 点击进入频道\n    channgeChannelFn(item) {\n      this.channelId = item.id;\n    },\n  },\n};\n</script>\n \n<style scoped lang = \"less\">\n/* .logo{\n     width: 100px;\n     height: 30px;\n   } */\n.main {\n  padding-top: 44px;\n}\n/* 设置 tabs 容器的样式 */\n/deep/ .van-tabs__wrap {\n  padding-right: 30px;\n  background-color: #fff;\n}\n\n/* 设置小图标的样式 */\n/* 实际就是遮住了下面，背景色一设置就好了 */\n.moreChannels {\n  position: fixed;\n  top: 62px;\n  right: 8px;\n  z-index: 999;\n}\n/* 频道编辑弹出层铺满屏幕 */\n.edit_wrap {\n  width: 100%;\n  height: 100%;\n}\n</style>","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=f7eb9c2c&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=f7eb9c2c&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f7eb9c2c\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $findIndex = require('../internals/array-iteration').findIndex;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND_INDEX = 'findIndex';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND_INDEX in []) Array(1)[FIND_INDEX](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.findIndex` method\n// https://tc39.es/ecma262/#sec-array.prototype.findindex\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $findIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND_INDEX);\n","var $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar ownKeys = require('../internals/own-keys');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar createProperty = require('../internals/create-property');\n\n// `Object.getOwnPropertyDescriptors` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptors\n$({ target: 'Object', stat: true, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object) {\n    var O = toIndexedObject(object);\n    var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n    var keys = ownKeys(O);\n    var result = {};\n    var index = 0;\n    var key, descriptor;\n    while (keys.length > index) {\n      descriptor = getOwnPropertyDescriptor(O, key = keys[index++]);\n      if (descriptor !== undefined) createProperty(result, key, descriptor);\n    }\n    return result;\n  }\n});\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","scopedSlots","_u","key","fn","proxy","on","$event","$router","push","staticClass","model","value","callback","$$v","channelId","expression","_l","item","id","name","show","channelList","addChannelFn","removeChannelFn","channgeChannelFn","staticRenderFns","onRefresh","isLoading","finished","onLoad","loading","art_id","disLikeFn","reportsFn","nativeOn","props","cid","Number","mounted","created","getArticlesListData","data","articleList","nextTime","methods","timestamp","res","obj","Promise","length","target","type","message","remark","component","closeFn","_v","_s","isEdit","removeFn","_e","_m","addFn","userChannelList","Array","default","allChannelList","result","computed","unChannelList","filter","index","$emit","components","ArticleList","ChannelEdit","getUserChannelData","newArr","lastArr","newObj","channels","int","$","$findIndex","addToUnscopables","FIND_INDEX","SKIPS_HOLES","proto","forced","findIndex","callbackfn","arguments","undefined","DESCRIPTORS","ownKeys","toIndexedObject","getOwnPropertyDescriptorModule","createProperty","stat","sham","getOwnPropertyDescriptors","object","descriptor","O","getOwnPropertyDescriptor","f","keys","_defineProperty","Object","defineProperty","enumerable","configurable","writable","enumerableOnly","getOwnPropertySymbols","symbols","sym","apply","_objectSpread2","i","source","forEach","defineProperties"],"sourceRoot":""}